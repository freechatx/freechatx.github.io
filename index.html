async function populateProfile() {
    const userData = await fetchData('user');

    // Check if banner_color exists in the user data and set it as background color
    if (userData.banner_color) {
        setProfileHeaderBackgroundColor(userData.banner_color);
    }

    // Populate profile header
    const profilePicture = document.querySelector('.profile-picture img');
    profilePicture.src = `https://cdn.discordapp.com/avatars/${userId}/${userData.avatar}`;
    document.getElementById('username').textContent = userData.username;

    // Event listeners for tabs
    const tabs = document.querySelectorAll('.profile-tab');
    tabs.forEach((tab) => {
        tab.addEventListener('click', async () => {
            const tabId = tab.id.replace('-tab', '');
            const content = document.getElementById('profile-content');

            content.innerHTML = ''; // Clear previous content

            switch (tabId) {
                case 'guilds':
                    // Fetch and display guilds here
                    const guildsData = await fetchData('guilds');
                    console.log('Guilds Data:', guildsData); // Debugging
                    const guildsElement = document.createElement('div');
                    if (guildsData) {
                        guildsData.forEach((guild) => {
                            const guildItem = document.createElement('div');
                            guildItem.className = 'connection-item';
                            const guildLogo = document.createElement('div');
                            guildLogo.className = 'connection-logo';
                            const logoImage = document.createElement('img');
                            logoImage.src = `https://cdn.discordapp.com/icons/${guild.id}/${guild.icon}.png`;
                            guildLogo.appendChild(logoImage);
                            const guildName = document.createElement('div');
                            guildName.textContent = guild.name;
                            guildItem.appendChild(guildLogo);
                            guildItem.appendChild(guildName);
                            guildsElement.appendChild(guildItem);
                        });
                    }
                    content.appendChild(guildsElement);
                    break;
                case 'connections':
                    // Fetch and display connections here
                    const connectionsData = await fetchData('connections');
                    console.log('Connections Data:', connectionsData); // Debugging
                    const connectionsElement = document.createElement('div');
                    connectionsElement.className = 'connection-list';
                    if (connectionsData) {
                        connectionsData.forEach((connection) => {
                            const connectionItem = document.createElement('div');
                            connectionItem.className = 'connection-item';
                            const connectionLogo = document.createElement('div');
                            connectionLogo.className = 'connection-logo';
                            const logoImage = document.createElement('img');
                            const logoURL = getLogoURL(connection.type);
                            logoImage.src = logoURL;
                            connectionLogo.appendChild(logoImage);
                            const connectionName = document.createElement('div');
                            connectionName.textContent = connection.name;
                            connectionItem.appendChild(connectionLogo);
                            connectionItem.appendChild(connectionName);
                            connectionsElement.appendChild(connectionItem);
                        });
                    }
                    content.appendChild(connectionsElement);
                    break;
                default:
                    break;
            }
        });
    });

    // Trigger the 'Guilds' tab by default
    tabs[0].click();
}

populateProfile();
